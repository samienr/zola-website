<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content=Nerd name=description><meta content="width=device-width,initial-scale=1" name=viewport><meta content="rgb(140, 170, 238)" name=theme-color><link href=https://samienr.com/projects/keyboard/ rel=canonical><title>How I Designed My First Custom Keyboard - Samien Rahman</title><link href=https://samienr.com/style.css rel=stylesheet><link media="(prefers-color-scheme: dark)" href=https://samienr.com/syntax-theme-dark.css rel=stylesheet><link media="(prefers-color-scheme: light)" href=https://samienr.com/syntax-theme-light.css rel=stylesheet><style>:root {--primary-color:#8caaee;--primary-color-alpha:rgba(140,170,238,.2)}</style><script src=https://samienr.com/js/copy-button.js></script><link crossorigin href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV rel=stylesheet><script crossorigin defer integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js></script><script crossorigin defer integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:'\\(',right:'\\)',display:true},{left:'$',right:'$',display:false}],throwOnError:false})})</script><link href=https://samienr.com/favicon.png rel=icon type=image/png><link href=https://samienr.com/apple-touch-icon.png rel=apple-touch-icon sizes=180x180 type=image/png><meta content="Samien Rahman" property=og:site_name><meta content="How I Designed My First Custom Keyboard - Samien Rahman" property=og:title><meta content=https://samienr.com/projects/keyboard/ property=og:url><meta content=Nerd property=og:description><meta content=https://samienr.com/card.png property=og:image><meta content=summary_large_image property=twitter:card><body><header id=site-nav><nav><a href=#main id=main-content tabindex=0>Skip to main content</a><ul><li id=home><a href=https://samienr.com> Samien Rahman </a><li class=link><a href=https://samienr.com/projects/> Projects </a><li class=link><a href=https://samienr.com/notebook/> Notebook </a><li class=link><a href=https://samienr.com/photography/> Photography </a><li class=link><a href=https://samienr.com/about/> About </a><li class=link><a href=https://samienr.com/contact/> Contact </a></ul></nav></header><div class=container id=main><div id=breadcrumb-container><a class=breadcrumb-path href=/>Home</a><span class=breadcrumb-separator> > </span><a class=breadcrumb-path href=https://samienr.com/projects/>Projects</a><span class=breadcrumb-separator> > </span><a class="breadcrumb-path active" href=https://samienr.com/projects/keyboard/ id=active-page>How I Designed My First Custom Keyboard</a></div><article><h1>How I Designed My First Custom Keyboard</h1><small> <time datetime=" 2024-06-14T00:00:00+00:00" pubdate>June 14, 2024</time> <span>•</span> <ul class=tags><li><a class=tag href=https://samienr.com/tags/keyboards/>Keyboards</a><li><a class=tag href=https://samienr.com/tags/electronics/>Electronics</a></ul> </small><p>I’ve been into custom mechanical keyboards for a while, but the absurdly high costs and long wait times for parts pushed me towards a different solution: designing and building a keyboard myself. As a college student, affordability and quick access are key, and the custom keyboard is just the opposite of that, so I decided to take on this project myself.<p>I figured if I were going to design the keyboard entirely myself, I might as well make it as <em>custom</em> as possible. I was going to design this keyboard something <em>just for myself</em>.<h1 id=step-1-the-design>Step 1: The Design</h1><p>Within a few weeks of <a href=https://reddit.com/r/ErgoMechKeyboards>snooping around online</a>, I discovered a whole world of bizarrely-shaped, split keyboards. I very quickly became inspired by the <a href=https://github.com/kata0510/Lily58>Lily58</a> and the <a href=https://github.com/foostan/crkbd>Corne</a>. I learned that the motivation behind these strange layouts came from two goals that I had myself:<ol><li>Reducing finger movement<li>Enhanced typing comfort</ol><p>Both of these goals are achieved by two design choices:<ol><li>Less keys = less places for my fingers to go<li>Key placement matching the natural positioning of fingers— meaning a split layout</ol><p>To start, I mapped out a rough layout by tracing my finger movements using a painting app on an iPad. <img alt="Traced finger positions" class=no-hover src=finger_paint.png><figcaption>Super basic, I know.</figcaption><p>That gave a basic idea of the where each finger naturally goes as I extend them.<p>As for hardware, I chose:<ul><li><strong>Seeed Studio XIAO nRF52840</strong> microcontroller for its Bluetooth Low Energy capability, affordable price, and ARM architecture.<li><strong>Kalih Choc Red switches</strong> for their low profile and because I like linear switches</ul><hr><h1 id=step-2-ergogen>Step 2: Ergogen</h1><p>I needed a tool to design the layout and found <a href=https://ergogen.cache.works/>Ergogen</a>. , which uses a simple YAML format to create layouts. Thanks to <a href=https://flatfootfox.com/ergogen-introduction/>a helpful blog series by FlatFootFox</a>, I defined a 3x6 grid for keys on each hand, matching the finger positions I had determined on the iPad. The flexibility of YAML allowed me to easily tweak the layout until it felt and looked right. Here’s a snippet of my Ergogen config:<pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">columns</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">outer</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">          <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">key</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">            <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">splay</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-integer z-decimal z-yaml">10</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">pinky</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">          <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">key</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">            <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">stagger</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-integer z-decimal z-yaml">3</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">ring</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">          <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">key</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">            <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">stagger</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-integer z-decimal z-yaml">8</span>
</span><span class="z-source z-yaml">            <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">splay</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-float z-decimal z-yaml">-4<span class="z-punctuation z-separator z-decimal z-yaml">.</span>1</span>
</span><span class="z-source z-yaml">            <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">spread</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">1.035kx</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">middle</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">          <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">key</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">            <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">stagger</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">.25*ky</span>
</span><span class="z-source z-yaml">            <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">splay</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-integer z-decimal z-yaml">-5</span>
</span><span class="z-source z-yaml">            <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">spread</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">1.04kx</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">index</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">          <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">key</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">            <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">stagger</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">-.65*ky</span>
</span><span class="z-source z-yaml">            <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">splay</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-integer z-decimal z-yaml">-1</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">inner</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">          <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">key</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">            <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">stagger</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">-.5*ky</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">rows</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">bottom</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">home</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">top</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">thumb</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">key</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">padding</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ky</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">spread</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">kx</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">anchor</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">ref</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">matrix_index_bottom</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">shift</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-meta z-flow-sequence z-yaml"><span class="z-punctuation z-definition z-sequence z-begin z-yaml">[</span><span class="z-constant z-numeric z-integer z-decimal z-yaml">2</span><span class="z-punctuation z-separator z-sequence z-yaml">,</span><span class="z-constant z-numeric z-integer z-decimal z-yaml">-28</span><span class="z-punctuation z-definition z-sequence z-end z-yaml">]</span></span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">columns</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">left</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">          <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">key</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">            <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">shift</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-meta z-flow-sequence z-yaml"><span class="z-punctuation z-definition z-sequence z-begin z-yaml">[</span><span class="z-constant z-numeric z-integer z-decimal z-yaml">-1</span><span class="z-punctuation z-separator z-sequence z-yaml">,</span><span class="z-constant z-numeric z-integer z-decimal z-yaml">0</span><span class="z-punctuation z-definition z-sequence z-end z-yaml">]</span></span>
</span><span class="z-source z-yaml">            <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">splay</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-integer z-decimal z-yaml">-15</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">middle</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">          <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">key</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">            <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">splay</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-float z-decimal z-yaml">-7<span class="z-punctuation z-separator z-decimal z-yaml">.</span>5</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">right</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">          <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">key</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">            <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">splay</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-integer z-decimal z-yaml">-15</span>
</span><span class="z-source z-yaml">            <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">shift</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-meta z-flow-sequence z-yaml"><span class="z-punctuation z-definition z-sequence z-begin z-yaml">[</span><span class="z-constant z-numeric z-float z-decimal z-yaml">2<span class="z-punctuation z-separator z-decimal z-yaml">.</span>6</span><span class="z-punctuation z-separator z-sequence z-yaml">,</span><span class="z-constant z-numeric z-integer z-decimal z-yaml">-2</span><span class="z-punctuation z-definition z-sequence z-end z-yaml">]</span></span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">rows</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">cluster</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span></code></pre><p>I used <a href=https://github.com/ceoloide/ergogen-footprints/tree/main>Ceoloide’s</a> footprint for the switch footprints, which are reversible, meaning that both halves of the board can use the same PCB design.</p><img alt="Preview of layout in ergogen online tool" class=no-hover src=ergogen_preview.png><figcaption>Preview of layout generated in Ergogen</figcaption><hr><h1 id=step-3-pcb-design>Step 3: PCB Design</h1><p>Ergogen generated a KiCad file with the board outline and switch footprints. I had to create and route the traces. Additionally, the footprint I used for the nRF52840 didn’t account for its battery pads, so I had to modify the footprint by adding a small cutout to route battery wires through. I haven’t messed around with PCBs before this besides some basic designs from school, so that was a nice learning experience. The supportive community on the <a href=https://discord.gg/kk4rXYkp4H>Absolem Club Discord server</a> helped me through the process.</p><img class=no-hover src=KiCad_before.png><figcaption>The PCB Ergogen generated</figcaption><img class=no-hover src=KiCad_after.png><figcaption>After adding traces and adjusting the microcontroller footprint</figcaption><p>Once all the electronics were in place, I decided to add some decorative patterns to the pcb, as I decided not to use a plate on this keyboard. <img class=no-hover src=final_pcb.png> And with that, the PCB design was pretty much done. All that was left was ordering everything and putting it all together.<h1 id=step-4-assembly-and-firmware>Step 4: Assembly and Firmware</h1><p>I ordered my PCB from <a href=https://jlcpcb.com/>JLCPCB</a> in black and white for about 20 USD, the microcontroller from <a href=https://www.seeedstudio.com/>SeeedStudio</a>, and the other components from <a href=https://typeractive.xyz/>Typeractive</a>.<p>I used my university’s makerspace for soldering, learning about reflow soldering for smaller components.<h2 id=keymap>Keymap</h2><p>First, I defined the keymap. I opted for the Colemak-DH layout, as it was designed to be a more ergonomic layout that also allows for faster typing speeds. The other layers were designed by seeing various designs online and then just iterating.</p><img class=no-hover src=default_layer.png><figcaption>Default layer</figcaption><img class=no-hover src=symbol_layer.png><figcaption>Symbol layer</figcaption><img class=no-hover src=number_layer.png><figcaption>Number layer</figcaption><img class=no-hover src=tri_layer.png><figcaption>Function layer</figcaption><img class=no-hover src=gaming_layer.png><figcaption>Gaming layer</figcaption><p>I also decided to make another layer for gaming to keep the WASD layout, but I haven’t been able to test how effective this is.<h2 id=firmware>Firmware</h2><p>I then opted for the ZMK Firmware, namely because QMK does not support wireless boards due to some licensing issues with Bluetooth, and because I do intend on learning Zephyr eventually, which ZMK is based on.<p>I began by mapping the pins on the microcontroller to the corresponding columns and rows of the keyboard matrix. I probably should’ve planned these before designing the PCB, but I chose these pins retroactively, as the PCB traces were already routed.<table><thead><tr><th>Pin Number<th>Digital<th>Matrix mapping<tbody><tr><td>P0.02<td>0<td>Outer Column<tr><td>P0.03<td>1<td>Pinky Column<tr><td>P0.28<td>2<td>Middle Column + outerthumb<tr><td>P0.29<td>3<td>Index Column + middlethumb<tr><td>P0.04<td>4<td>Inner Column + innerthumb<tr><td>P1.12<td>7<td>Upper Row<tr><td>P1.13<td>8<td>Middle Row<tr><td>P1.14<td>9<td>Lower Row<tr><td>P1.15<td>10<td>Thumb Row</table><h3 id=creating-the-shield>Creating the shield</h3><p>Because this keyboard was completely original, there wasn’t a pre-existing shield, so I had to make my own. That wasn’t so bad. The <a href=https://zmk.dev/docs/development/new-shield>ZMK documentation</a> is very well written and easy to follow.<p>All that was left was to compile and flash the firmware! <em>Not Really</em><h1 id=trouble-in-paradise>Trouble in Paradise</h1><p>Despite the careful planning and assembly, I ran into a significant issue: the left half of the keyboard worked perfectly and paired with my devices, but the right half was unresponsive.<h3 id=initial-diagnosis>Initial Diagnosis</h3><p>I tried resetting the firmware, suspecting an issue with the pairing process. This fixed the issue in that the right half now connected, but it also led me to find another problem: most keys on the right half were unresponsive, and pressing the top key in each column caused all keys in that column to ghost.<h3 id=physical-troubleshooting>Physical Troubleshooting</h3><p>I grabbed a multimeter to test each diode, as my soldering job for the right half was particularly ugly, but each diode was functioning correctly. Next, I tested each diode-switch pair, where I did find an inconsistency in voltages. I then tried flipping all the diodes, as perhaps the direction needed to be flipped because the board was flipped, but this yielded no change. It was time to take a look at the PCB.<h3 id=pcb-analysis>PCB Analysis</h3><p>I next decided to take a look at the PCB layout. This is where I found the culprit. I discovered that I had forgotten to route one of the pads on the backside (the front for the right side of the board). Fortunately, because the left and right halves of the board use the same PCB, I was able to simply resolder the microcontroller to the back side of the right half. I knew this would work because the left side worked flawlessly, and although the diode pads were on the other side, all the switch connections were through-holes, so the side on which they were installed would not matter. All that was left was to compensate with software by reversing the order of the pins. This finally worked.<h1 id=conclusion>Conclusion</h1><p>This project was a bit challenging but very rewarding, providing me with a custom mechanical keyboard tailored to my preferences. It was also my first truly original electronics project, and it taught me a lot about PCB design and soldering, all through practical hands-on experience. This project also helped in refining my independent problem-solving skills, as I am used to having either documentation or peers to take help from. I hope this inspires others to try their hand at DIY keyboard building!<h1 id=next-steps>Next Steps</h1><p>I’m probably going to work on a case for the boards next. The goal as it stands now is to create a model for 3D printing just to protect the boards (and the surfaces I put them on), then to eventually design a case for CNC that holds the boards at the most comfortable angles for me.</p><img src=keyboard.jpg><figcaption>The completed product</figcaption></article><div class=dialog-buttons><a class=inline-button href=#top>Go to Top</a></div></div><footer id=site-footer><p title="Last built at 2024-06-18 Tue 11:49">© samienr 2024</footer>